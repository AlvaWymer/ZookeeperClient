<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.mldn.travel.dao.IDeptDAO">
	<!-- 1.1查询所有的部门名称 -->
	<select id="findAllDeptName" resultType="Dept">
		select did,dname,eid from dept
	</select>
	<!--1.1 根据部门的 eid 查询emp表中的 部门负责人的姓名 -->
	<select id="findAllManagerNameForDeptName"  resultType="Emp">
	select eid,lid,did,ename,sal,phone,password,photo,note,hiredate,ineid,locked from emp where eid in(
			select eid from dept);
	</select>
	<!--1.2 部门名称更新 -->
	<update id="doUpdate" parameterType="Dept" >
		UPDATE dept SET dname=#{dname} WHERE did = #{did} ;
	</update> 
	
	<!-- 1.3 查询部门的名称 -->
	<select id="findById" parameterType="string" resultType="Dept">
		select did,dname,eid from dept where eid=#{eid}
	</select>
	<!-- 1.3 + 1.4 + 2.1 查询部门 -->
	<!--自己给自己挖的坑。。。。实际上和上面的只是传的 id 不一样，但是类型也不一样  -->
	<select id="findByIdForDid" parameterType="long" resultType="Dept">
		select did,dname,eid from dept where did=#{did}
	</select>
	
	<!--1.4 +2.1  更新部门表中的经理 -->
	<update id="doUpdateManager" parameterType="Dept" >
		UPDATE dept SET eid=#{eid} WHERE did=#{did}
	</update> 
	
	<!--2.1.1查询所有的部门信息 -->
	<select id="findAll"  resultType="Dept">
		SELECT did,dname,eid FROM dept ;
	</select>
	
	
	
	
</mapper>
